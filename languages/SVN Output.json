// [PackageDev] target_format: plist, ext: tmLanguage
{
    "name": "SVN Output",
    "scopeName": "source.svn-output",
    "fileTypes": ["SVN-output"],
    "uuid": "feea73e8-edc4-4c42-b547-847410c70e16",
    "patterns": [
        { "include": "#command" }
    ],

    "repository": {
        "command": {
            "name": "meta.command.svn-output",
            "begin": "(?!:^|\n)(Command): ([^\n]*)",
            "end": "(?!:^|\n) {4}(Completed)",
            "beginCaptures": {
                "1": { "name": "keyword.control.svn-output" },
                "2": { "name": "string.meta.command.name.svn-output" }
            },
            "endCaptures": {
                "1": { "name": "keyword.control.svn-output" }
            },
            "patterns": [
                { "include": "#commandRaw" },
                { "include": "#files" },
                { "include": "#output" },
                { "include": "#error" }
            ]
        },
        "commandRaw": {
            "begin": "(?!:^|\n) {4}(svn)",
            "end": "\n(?!: {4}Files)",
            "beginCaptures": {
                "1": { "name": "keyword.command.raw.svn-output" }
            },
            "patterns": [
                { "include": "#commandName" },
                { "include": "#commandParam" },
                { "include": "#commandFiles" }
            ]
        },
        "commandName": {
            "match": " (log|update|commit|revert|status|add|delete|cleanup|lock|unlock|merge|diff|rename|blame|resolve|switch|branch|checkout)",
            "captures": {
                "1": { "name": "keyword.command.name.raw.svn-output" }
            }
        },
        "commandParam": {
            "match": " (-l [0-9]+|-m \".+?\"|-[a-z]|--[a-z0-9-]+)",
            "captures": {
                "1": { "name": "variable.parameter.command.svn-output" }
            }
        },
        "commandFiles": {
            "begin": " \"",
            "end": "\"",
            "patterns": [
                { "include": "#filePath" }
            ]
        },
        "files": {
            "begin": "^ {4}(Files):",
            "end": "^ {4}(End Files)",
            "beginCaptures": {
                "1": { "name": "keyword.control.files.svn-output" }
            },
            "endCaptures": {
                "1": { "name": "keyword.control.end.svn-output" }
            },
            "patterns": [
                { "include": "#filePath" }
            ]
        },
        "output": {
            "begin": "^ {4}(Output):",
            "end": "^ {4}(End Output)",
            "beginCaptures": {
                "1": { "name": "keyword.control.output.svn-output" }
            },
            "endCaptures": {
                "1": { "name": "keyword.control.end.svn-output" }
            },
            "patterns": [
                { "include": "#filePath" }
            ]
        },
        "error": {
            "begin": "^ {4}(Error):",
            "end": "^ {4}(End Error)",
            "beginCaptures": {
                "1": { "name": "keyword.control.error.svn-output" }
            },
            "endCaptures": {
                "1": { "name": "keyword.control.end.svn-output" }
            },
            "patterns": [
                { "include": "#filePath" }
            ]
        },
        "filePath": {
            "patterns": [
                { "include": "#unixPath" },
                { "include": "#ntPath" }
            ]
        },
        "unixPath": {
            "match": "(\/[^\n\"'']*)",
            "captures": {
                "1": { "name": "entity.name.filename.unix.svn-output" }
            }
        },
        "ntPath": {
            "match": "([A-Za-z]:\\[^\n\"''].*)",
            "captures": {
                "1": { "name": "entity.name.filename.nt.svn-output" }
            }
        },
        "svnPath": {
            "match": "(\/[^\n\"'']*)",
            "captures": {
                "1": { "name": "entity.name.filename.svn.svn-output" }
            }
        }
    }
}
